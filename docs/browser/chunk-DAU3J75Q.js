import{a as ce}from"./chunk-5DG6IW7H.js";import{b as pe,e as w,h as D,k as le,l as F}from"./chunk-MR7WULDA.js";import{Ab as C,Ba as X,Bb as ie,C as A,Db as u,Ea as a,Eb as y,Fb as oe,Lb as ae,M as K,Mb as re,Nb as se,Rb as b,Ta as v,U as M,Z as f,bb as h,ca as Q,cb as P,da as W,db as Y,ea as H,eb as _,ec as me,fa as V,fb as E,gb as l,hb as s,ib as r,jb as S,kb as m,lb as p,ma as z,mb as O,nb as Z,ob as ee,pb as I,q,rb as c,u as x,wb as te,xb as ne,yb as o,zb as d}from"./chunk-BEIQNUZN.js";var U=()=>[],G=n=>({page:n});function ue(n,t){if(n&1){let e=Z();s(0,"button",3),I("click",function(){let g=Q(e).$implicit,B=c();return W(B.activePage.set(g))}),o(1),r()}if(n&2){let e=t.$implicit,i=c();te("btn-primary",e===i.activePage()),l("routerLink",u(5,U))("queryParams",y(6,G,e)),a(),C(" ",e," ")}}var T=class n{pages=b(0);currentPage=b(1);activePage=se(this.currentPage);getPagesList=ae(()=>{let t=this.pages(),e=this.activePage();if(t<=5)return Array.from({length:t},(B,$)=>$+1);let i=Math.max(1,e-2),g=Math.min(t,i+4);return Array.from({length:g-i+1},(B,$)=>i+$)});previousPage(){this.activePage()>1&&this.activePage.update(t=>t-1)}nextPage(){this.activePage()<this.pages()&&this.activePage.update(t=>t+1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=v({type:n,selectors:[["app-pagination"]],inputs:{pages:[1,"pages"],currentPage:[1,"currentPage"]},decls:7,vars:12,consts:[[1,"join","flex","justify-center","items-center","gap-2"],[1,"join-item","btn",3,"click","routerLink","queryParams","disabled"],[1,"join-item","btn",3,"btn-primary","routerLink","queryParams"],[1,"join-item","btn",3,"click","routerLink","queryParams"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"button",1),I("click",function(){return i.previousPage()}),o(2,"\xAB"),r(),_(3,ue,2,8,"button",2,Y),s(5,"button",1),I("click",function(){return i.nextPage()}),o(6,"\xBB"),r()()),e&2&&(a(),l("routerLink",u(6,U))("queryParams",y(7,G,i.activePage()-1))("disabled",i.activePage()===1),a(2),E(i.getPagesList()),a(2),l("routerLink",u(9,U))("queryParams",y(10,G,i.activePage()+1))("disabled",i.activePage()===i.pages()))},dependencies:[D],encapsulation:2})};var R=class n{http=f(pe);API_URL=ce.apiUrl;getCharacters(t=1){return this.http.get(`${this.API_URL}/characters?page=${t}`).pipe(x(e=>e),A(e=>(console.error("Error al obtener personajes",e),q({count:0,next:null,prev:null,pages:0,results:[]}))))}getCharacterById(t){return this.http.get(`${this.API_URL}/characters/${t}`).pipe(A(e=>(console.error("Personaje no encontrado",e),q(null))))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var j=class n{activatedRoute=f(w);currentPage=F(this.activatedRoute.queryParamMap.pipe(x(t=>t.get("page")?+t.get("page"):1),x(t=>isNaN(t)?1:t)),{initialValue:1});static \u0275fac=function(e){return new(e||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var N=class n{simpsonsCount=b.required();totalPages=b.required();static \u0275fac=function(e){return new(e||n)};static \u0275cmp=v({type:n,selectors:[["app-hero-simpsons"]],inputs:{simpsonsCount:[1,"simpsonsCount"],totalPages:[1,"totalPages"]},decls:28,vars:2,consts:[["role","banner",1,"hero","bg-linear-to-r","from-yellow-400","via-yellow-500","to-orange-400","text-base-content"],[1,"hero-content","text-center","py-12"],[1,"max-w-md"],[1,"text-5xl","font-bold","text-black","drop-shadow-md"],[1,"py-6","text-lg","text-gray-800","font-medium"],[1,"stats","stats-horizontal","shadow-lg","bg-white/90"],[1,"stat"],[1,"stat-figure","text-primary"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"inline-block","w-8","h-8","stroke-current"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0zM7 10a2 2 0 11-4 0 2 2 0z"],[1,"stat-title","text-gray-700"],[1,"stat-value","text-primary"],[1,"stat-desc","text-gray-600"],[1,"stat-figure","text-secondary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"stat-value","text-secondary"]],template:function(e,i){e&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),o(4,"The Simpsons"),p(),m(5,"p",4),o(6," Explora el universo de la familia m\xE1s famosa de Springfield "),p(),m(7,"div",5)(8,"div",6)(9,"div",7),H(),m(10,"svg",8),O(11,"path",9),p()(),V(),m(12,"div",10),o(13,"Personajes"),p(),m(14,"div",11),o(15),p(),m(16,"div",12),o(17,"Total de registros"),p()(),m(18,"div",6)(19,"div",13),H(),m(20,"svg",8),O(21,"path",14),p()(),V(),m(22,"div",10),o(23,"P\xE1ginas"),p(),m(24,"div",15),o(25),p(),m(26,"div",12),o(27,"Total disponibles"),p()()()()()()),e&2&&(a(15),C(" ",i.simpsonsCount()," "),a(10),d(i.totalPages()))},encapsulation:2})};var ge=(n,t)=>t.label;function fe(n,t){if(n&1&&(m(0,"a",1),o(1),p()),n&2){let e=c().$implicit;ee("href",e.link,X),a(),d(e.label)}}function ve(n,t){if(n&1&&(m(0,"span"),o(1),p()),n&2){let e=c().$implicit;a(),d(e.label)}}function be(n,t){if(n&1&&(m(0,"li"),h(1,fe,2,2,"a",1)(2,ve,2,1,"span"),p()),n&2){let e=t.$implicit;a(),P(e.link?1:2)}}var L=class n{items=b([]);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=v({type:n,selectors:[["app-breadcrumbs"]],inputs:{items:[1,"items"]},decls:4,vars:0,consts:[[1,"breadcrumbs","text-sm","px-6","py-3","bg-base-200"],[1,"link","link-hover",3,"href"]],template:function(e,i){e&1&&(m(0,"div",0)(1,"ul"),_(2,be,3,1,"li",null,ge),p()()),e&2&&(a(2),E(i.items()))},styles:[".breadcrumbs[_ngcontent-%COMP%]{font-size:.9rem}"]})};var xe=()=>({label:"Inicio",link:"/"}),he=()=>({label:"Simpsons",link:"/simpsons"}),Pe=()=>({label:"Personajes"}),_e=(n,t,e)=>[n,t,e],Ee=()=>[],Se=n=>["/simpsons",n],Ce=(n,t)=>t.id;function ye(n,t){n&1&&(s(0,"div",6),S(1,"span",9),r())}function ke(n,t){if(n&1&&(s(0,"div",7),S(1,"app-pagination",10)(2,"div",11),r()),n&2){let e,i=c();a(),l("pages",((e=i.simpsonsResource())==null?null:e.pages)??0)("currentPage",i.paginationService.currentPage())}}function Me(n,t){if(n&1&&(s(0,"tr")(1,"td"),o(2),r(),s(3,"td"),o(4),r(),s(5,"td"),o(6),r(),s(7,"td")(8,"span"),o(9),r()(),s(10,"td")(11,"a",13),o(12," Ver Detalle "),r()()()),n&2){let e=t.$implicit;a(2),d(e.id),a(2),d(e.name),a(2),d(e.occupation),a(2),ne(ie("badge badge-",e.status==="Alive"?"success":"error")),a(),C(" ",e.status," "),a(2),l("routerLink",y(8,Se,e.id))}}function Ie(n,t){if(n&1&&(s(0,"div",8)(1,"table",12)(2,"thead")(3,"tr")(4,"th"),o(5,"ID"),r(),s(6,"th"),o(7,"Nombre"),r(),s(8,"th"),o(9,"Ocupaci\xF3n"),r(),s(10,"th"),o(11,"Estado"),r(),S(12,"th"),r()(),s(13,"tbody"),_(14,Me,13,10,"tr",null,Ce),r()()()),n&2){let e,i=c();a(14),E(((e=i.simpsonsResource())==null?null:e.results)??u(0,Ee))}}var de=class n{simpsonsService=f(R);paginationService=f(j);route=f(w);simpsonsResource=F(this.route.queryParamMap.pipe(x(t=>Number(t.get("page"))||1),K(t=>this.simpsonsService.getCharacters(t))),{initialValue:null});simpsonsCount=z(0);totalPages=z(0);constructor(){re(()=>{let t=this.simpsonsResource();if(!t)return;this.simpsonsCount.set(t.count??0);let e=Math.ceil((t.count??0)/10);this.totalPages.set(e),console.log("SimpsonsResource changed:",this.simpsonsResource())})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=v({type:n,selectors:[["app-simpsons-page"]],decls:11,vars:13,consts:[[3,"items"],[1,"p-6"],[3,"simpsonsCount","totalPages"],[1,"p-8"],[1,"text-3xl","font-bold","mb-2","text-center"],[1,"text-lg","text-center","mb-6"],[1,"flex","justify-center","items-center","h-64"],[1,"flex","gap-2","items-center","h-20","mb-4"],[1,"overflow-x-auto"],[1,"loading","loading-spinner","loading-lg"],[3,"pages","currentPage"],[1,"flex","flex-1"],[1,"table"],[1,"btn","btn-sm","btn-primary",3,"routerLink"]],template:function(e,i){if(e&1&&(S(0,"app-breadcrumbs",0),s(1,"section",1),S(2,"app-hero-simpsons",2),s(3,"section",3)(4,"h1",4),o(5,"The Simpsons API"),r(),s(6,"h2",5),o(7,"Listado de personajes"),r(),h(8,ye,2,0,"div",6),h(9,ke,3,2,"div",7),h(10,Ie,16,1,"div",8),r()()),e&2){let g;l("items",oe(9,_e,u(6,xe),u(7,he),u(8,Pe))),a(2),l("simpsonsCount",((g=i.simpsonsResource())==null?null:g.count)??0)("totalPages",i.totalPages()),a(6),P(i.simpsonsResource()?-1:8),a(),P(i.simpsonsResource()!==null?9:-1),a(),P(i.simpsonsResource()?10:-1)}},dependencies:[me,le,D,T,N,L],encapsulation:2})};export{de as SimpsonsPageComponent};
